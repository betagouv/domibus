

<assembly
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>tomcat-full</id>
    <formats>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>true</includeBaseDirectory>
    <baseDirectory></baseDirectory>
    <includeSiteDirectory>false</includeSiteDirectory>
    <fileSets>
        <fileSet>
            <directory>${project.basedir}/cargo/installs/tomcat-${tomcat.version}/apache-tomcat-${tomcat.version}</directory>
            <outputDirectory>domibus</outputDirectory>
            <useDefaultExcludes>true</useDefaultExcludes>
            <filtered>false</filtered>
            <excludes>
                <exclude>work</exclude>
                <exclude>webapps/**/*</exclude>
                <exclude>conf/server.xml</exclude>
                <exclude>conf/web.xml</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${project.build.directory}/replacer/conf</directory>
            <outputDirectory>domibus/conf</outputDirectory>
            <filtered>false</filtered>
            <!-- web.xml is somehow getting Windows CRLF line endings after being processed by the replacer plugin -->
            <lineEnding>unix</lineEnding>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/../../Tomcat/Domibus-MSH-tomcat/src/main/conf/domibus</directory>
            <outputDirectory>domibus/conf/domibus</outputDirectory>
            <useDefaultExcludes>true</useDefaultExcludes>
            <filtered>false</filtered>
            <excludes>
                <exclude>example/**</exclude>
                <exclude>policies/**</exclude>
                <exclude>keystores/**</exclude>
                <exclude>keystores_dyn/**</exclude>
                <exclude>plugins/**</exclude>
            </excludes>
        </fileSet>
    </fileSets>

    <files>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/domains/domain_name/domain_name-domibus.properties</source>
            <outputDirectory>domibus/conf/domibus/domains/domain_name</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/domains/default/default-domibus.properties</source>
            <outputDirectory>domibus/conf/domibus/domains/default</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/domains/super-domibus.properties</source>
            <outputDirectory>domibus/conf/domibus/domains</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/internal/ehcache.xml</source>
            <outputDirectory>domibus/conf/domibus/internal</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../../Tomcat/Domibus-MSH-tomcat-distribution/target/domibus-MSH-tomcat-distribution-${project.version}.war</source>
            <outputDirectory>domibus/webapps</outputDirectory>
            <destName>domibus.war</destName>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/changelog.txt</source>
            <outputDirectory>/</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/upgrade-info.md</source>
            <outputDirectory>/</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>
                ${project.basedir}/../../Plugin-WS/Domibus-default-ws-plugin/src/main/conf/tomcat/ws-plugin.properties
            </source>
            <outputDirectory>domibus/conf/domibus/plugins/config</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>
                ${project.basedir}/../../Plugin-WS/Domibus-default-ws-plugin/src/main/conf/tomcat/domains/domain_name/domain_name-ws-plugin.properties
            </source>
            <outputDirectory>domibus/conf/domibus/plugins/config/domains/domain_name</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../../Plugin-WS/Domibus-default-ws-plugin/target/domibus-default-ws-plugin-${project.version}.jar</source>
            <outputDirectory>domibus/conf/domibus/plugins/lib</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/policies/eDeliveryAS4Policy.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/policies/eDeliveryAS4Policy_BST.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/policies/eDeliveryAS4Policy_BST_PKIP.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/../Domibus-MSH/src/main/conf/domibus/policies/eDeliveryAS4Policy_IS.xml</source>
            <outputDirectory>domibus/conf/domibus/policies</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/assembly/tomcat/setenv.bat</source>
            <outputDirectory>domibus/bin</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/assembly/tomcat/setenv.sh</source>
            <outputDirectory>domibus/bin</outputDirectory>
            <filtered>false</filtered>
        </file>
        <file>
            <source>${project.basedir}/src/main/assembly/tomcat/ServerInfo.properties</source>
            <outputDirectory>domibus/lib/org/apache/catalina/util</outputDirectory>
            <filtered>false</filtered>
        </file>
    </files>
</assembly>